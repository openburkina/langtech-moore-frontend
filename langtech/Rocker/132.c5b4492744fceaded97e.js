(self.webpackChunkrocker=self.webpackChunkrocker||[]).push([[132],{5132:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ContributionsModule:()=>I});var o=n(1116),i=n(5424),r=n(6304),u=n(453),a=n(8318),c=n(7756),l=n(4107),s=n(5366),g=n(7598),d=n(2235),p=n(2498),b=n(1462),Z=n(5035);function m(t,e){if(1&t&&(s.TgZ(0,"option",34),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("ngValue",t.id),s.xp6(1),s.hij(" ",t.telephone+" - "+t.nom+" "+t.prenom," ")}}function h(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",15),s.TgZ(1,"div",16),s.TgZ(2,"div",21),s.TgZ(3,"div",22),s._uU(4," Rechercher une demande par les crit\xe8res suivants "),s.qZA(),s.qZA(),s._UZ(5,"hr"),s.TgZ(6,"div",21),s.TgZ(7,"form",23),s.NdJ("ngSubmit",function(){return s.CHM(t),s.oxw().onSearch()}),s.TgZ(8,"div",24),s.TgZ(9,"div",25),s.TgZ(10,"label",26),s._uU(11,"Contributeur"),s.qZA(),s.TgZ(12,"select",27),s.TgZ(13,"option",28),s._uU(14,"--S\xe9lectionner le contributeur--"),s.qZA(),s.YNc(15,m,2,2,"option",29),s.ALo(16,"async"),s.qZA(),s.qZA(),s.TgZ(17,"div",25),s.TgZ(18,"label",30),s._uU(19,"Source de donn\xe9es"),s.qZA(),s._UZ(20,"input",31),s.qZA(),s.TgZ(21,"div",25),s.TgZ(22,"label",32),s._uU(23,"Statut de la traduction"),s.qZA(),s.TgZ(24,"select",33),s.TgZ(25,"option",28),s._uU(26,"--S\xe9lectionner le statut--"),s.qZA(),s.TgZ(27,"option",34),s._uU(28,"En attente"),s.qZA(),s.TgZ(29,"option",34),s._uU(30,"Valid\xe9e"),s.qZA(),s.TgZ(31,"option",34),s._uU(32,"Rejett\xe9e"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(33,"div",25),s.TgZ(34,"label",35),s._uU(35,"Type de la traduction"),s.qZA(),s.TgZ(36,"select",36),s.TgZ(37,"option",28),s._uU(38,"--S\xe9lectionner le statut--"),s.qZA(),s.TgZ(39,"option",34),s._uU(40,"TEXTE"),s.qZA(),s.TgZ(41,"option",34),s._uU(42,"AUDIO"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(43,"div",37),s.TgZ(44,"button",38),s.NdJ("click",function(){return s.CHM(t),s.oxw().onResetSearchForm()}),s._UZ(45,"i",39),s._uU(46," R\xe9nitialiser "),s.qZA(),s.TgZ(47,"button",40),s._UZ(48,"i",41),s._uU(49," Rechercher "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(7),s.Q6J("formGroup",t.formSearch),s.xp6(6),s.Q6J("ngValue",null),s.xp6(2),s.Q6J("ngForOf",s.lcZ(16,10,t.contributeurs$)),s.xp6(10),s.Q6J("ngValue",null),s.xp6(2),s.Q6J("ngValue","EN_ATTENTE"),s.xp6(2),s.Q6J("ngValue","VALIDER"),s.xp6(2),s.Q6J("ngValue","REJETER"),s.xp6(6),s.Q6J("ngValue",null),s.xp6(2),s.Q6J("ngValue","TEXTE"),s.xp6(2),s.Q6J("ngValue","AUDIO")}}function f(t,e){1&t&&(s.TgZ(0,"div",42),s.TgZ(1,"h6"),s._uU(2," Aucune contribution enregistr\xe9e ! "),s.qZA(),s.qZA())}function T(t,e){1&t&&(s.TgZ(0,"button",55),s._uU(1," En attente "),s.qZA())}function x(t,e){1&t&&(s.TgZ(0,"button",56),s._uU(1," Valid\xe9e "),s.qZA())}function A(t,e){1&t&&(s.TgZ(0,"button",57),s._uU(1," Rejett\xe9e "),s.qZA())}function q(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s.YNc(8,T,2,0,"button",47),s.YNc(9,x,2,0,"button",48),s.YNc(10,A,2,0,"button",49),s.qZA(),s.TgZ(11,"td"),s._uU(12),s.qZA(),s.TgZ(13,"td"),s._uU(14),s.qZA(),s.TgZ(15,"td"),s.TgZ(16,"div",50),s.TgZ(17,"button",51),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).getOneTraduction(e.id)}),s._UZ(18,"i",52),s.qZA(),s.TgZ(19,"button",53),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).onConfirmDeleteTraduction(e)}),s._UZ(20,"i",54),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,n=e.index;s.xp6(2),s.Oqu(n+1),s.xp6(2),s.Oqu(t.libelle),s.xp6(2),s.Oqu(t.type),s.xp6(2),s.Q6J("ngIf","EN_ATTENTE"===t.etat),s.xp6(1),s.Q6J("ngIf","VALIDER"===t.etat),s.xp6(1),s.Q6J("ngIf","REJETER"===t.etat),s.xp6(2),s.Oqu(null==t.langue?null:t.langue.libelle),s.xp6(2),s.Oqu((null==t.utilisateur?null:t.utilisateur.telephone)+" - "+(null==t.utilisateur?null:t.utilisateur.nom)+" "+(null==t.utilisateur?null:t.utilisateur.prenom))}}function v(t,e){if(1&t&&(s.TgZ(0,"div",43),s.TgZ(1,"table",44),s.TgZ(2,"thead",45),s.TgZ(3,"tr"),s.TgZ(4,"th"),s._uU(5,"#"),s.qZA(),s.TgZ(6,"th"),s._uU(7,"Source de donn\xe9es"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"Type de traduction"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Etat"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Langue"),s.qZA(),s.TgZ(14,"th"),s._uU(15,"Contributeur"),s.qZA(),s.TgZ(16,"th"),s._uU(17,"Actions"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"tbody"),s.YNc(19,q,21,8,"tr",46),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(19),s.Q6J("ngForOf",t.traductions)}}function S(t,e){1&t&&s._uU(0,"Pr\xe9c.")}function w(t,e){1&t&&s._uU(0,"Suiv.")}function U(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",58),s.TgZ(1,"div",59),s.TgZ(2,"ngb-pagination",60),s.NdJ("pageChange",function(e){return s.CHM(t),s.oxw().ngbPaginationPage=e})("pageChange",function(e){return s.CHM(t),s.oxw().loadPage(e)}),s.YNc(3,S,1,0,"ng-template",61),s.YNc(4,w,1,0,"ng-template",62),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(2),s.Q6J("collectionSize",t.totalItems)("page",t.ngbPaginationPage)("pageSize",t.itemsPerPage)("maxSize",t.maxSize)("rotate",!0)("boundaryLinks",!1)}}const _=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i){this.contributionService=t,this.modal=e,this.notification=n,this.fb=o,this.contributeurService=i,this.totalItems=0,this.itemsPerPage=20,this.maxSize=20,this.page=0,this.ngbPaginationPage=1,this.contributeurs$=new a.y,this.traductions=[],this.audioList=[{url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",title:"Smaple 1",cover:"https://i1.sndcdn.com/artworks-000249294066-uow7s0-t500x500.jpg"},{url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3",title:"Sample 2",cover:"https://i1.sndcdn.com/artworks-000249294066-uow7s0-t500x500.jpg"},{url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3",title:"Sample 3",cover:"https://i1.sndcdn.com/artworks-000249294066-uow7s0-t500x500.jpg"}]}ngOnInit(){this.enableShowFilter=!1,this.traduction=new u.d,this.contributeurs$=this.contributeurService.contributeurs$,this.initSearchForm(),this.getTraductions()}initSearchForm(){this.formSearch=this.fb.group({contributeurId:null,sourceDonnee:null,etat:null,type:null})}getTraductions(){this.contributionService.getTraductions(this.traduction,{page:this.page,size:this.itemsPerPage}).subscribe({next:t=>{console.log(t.body),null!==t.body&&(this.totalItems=Number(t.headers.get("X-Total-Count")),this.traductions=t.body)},error:t=>{this.notification.open("danger",t.error.detail?t.error.detail:"Une erreur est survenue lors de la r\xe9cup\xe9ration des traductions !")}})}getOneTraduction(t){this.contributionService.getOne(t).subscribe({next:t=>{console.log(t.body),t.body?this.onShowDetailTraduction(t.body):this.notification.open("danger","Une erreur est survenue lors de la r\xe9cup\xe9ration des traductions !")},error:t=>{this.notification.open("danger",t.error.detail?t.error.detail:"Une erreur est survenue lors de la r\xe9cup\xe9ration des traductions !")}})}onShowDetailTraduction(t){var e=this;return(0,r.Z)(function*(){const n=yield e.modal.open(c.Q,{size:"lg",backdrop:"static",centered:!0});n.componentInstance.traduction=t,n.componentInstance.audio=`data:audio/mp4;base64,${t.contenuAudio}`,n.result.then(t=>{!0===t&&e.onSearch()})})()}onConfirmDeleteTraduction(t){var e=this;return(0,r.Z)(function*(){const n=yield e.modal.open(l.X,{size:"lg",backdrop:"static",centered:!0});n.componentInstance.message="Voulez-vous supprimer cette traduction ?",n.result.then(n=>{n&&e.deleteTraduction(t)})})()}deleteTraduction(t){this.contributionService.delete(t.id).subscribe({next:()=>{this.notification.open("success","Votre traduction a \xe9t\xe9 supprim\xe9e avec succ\xe8s !")},error:()=>{this.notification.open("danger","Une erreur est survenue lors de la suppression de la traduction !")}})}onChangeFilterStatus(){this.enableShowFilter=!this.enableShowFilter}onSearch(){this.traduction.sourceDonnee.libelle=this.formSearch.value.sourceDonnee,this.traduction.etat=this.formSearch.value.etat,this.traduction.type=this.formSearch.value.type,this.traduction.utilisateur.id=this.formSearch.value.contributeurId,this.getTraductions()}onResetSearchForm(){this.formSearch.reset(),this.onSearch()}loadPage(t){this.page=t-1,this.getTraductions()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(g.u),s.Y36(d.FF),s.Y36(p.g),s.Y36(b.qu),s.Y36(Z.W))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-contributions"]],decls:25,vars:7,consts:[[1,"page-breadcrumb","d-none","d-sm-flex","align-items-center","mb-3"],[1,"breadcrumb-title","pe-3"],[1,"ps-3"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0","p-0"],[1,"breadcrumb-item"],["href","#",3,"click"],[1,"bx","bx-home-alt"],["aria-current","page",1,"breadcrumb-item","active"],[1,"ms-auto"],[1,"btn-group"],["type","button",1,"btn","btn-white","text-primary",3,"click"],[1,"btn-group",3,"click"],["type","button",1,"btn","btn-white","dropdown-toggle","dropdown-toggle-nocaret","px-1"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"d-lg-flex","align-items-center","mb-4"],["class","position-relative text-center alert alert-warning",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex",4,"ngIf"],[1,"row","align-items-center"],[1,"col-lg-12","col-xl-12","h5","text-primary"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-md-6","col-lg-3","mb-3"],["for","contributeurId",1,"col-form-label"],["name","contributeurId","formControlName","contributeurId","id","contributeurId",1,"form-control"],["selected","","disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","sourceDonnee",1,"col-form-label"],["type","text","name","sourceDonnee","formControlName","sourceDonnee","id","sourceDonnee",1,"form-control"],["for","etat",1,"col-form-label"],["name","etat","formControlName","etat","id","etat",1,"form-control"],[3,"ngValue"],["for","type",1,"col-form-label"],["name","type","formControlName","type","id","type",1,"form-control"],[1,"form-group","text-center"],["type","reset",1,"btn","btn-outline-danger","radius-30","mx-3",3,"click"],[1,"bx","bx-x-circle","mr-1"],["type","submit",1,"btn","btn-outline-success","radius-30"],[1,"bx","bx-search"],[1,"position-relative","text-center","alert","alert-warning"],[1,"table-responsive"],[1,"table","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-warning btn-sm",4,"ngIf"],["type","button","class","btn btn-outline-success btn-sm text-uppercase",4,"ngIf"],["type","button","class","btn btn-outline-danger btn-sm text-uppercase",4,"ngIf"],[1,"d-flex","order-actions"],["type","button",1,"btn","btn-outline-warning","btn-sm","radius-30","px-2",3,"click"],[1,"bx","bx-show-alt"],["type","button",1,"btn","btn-outline-danger","btn-sm","radius-30","px-2","ms-3",3,"click"],[1,"bx","bxs-trash"],["type","button",1,"btn","btn-outline-warning","btn-sm"],["type","button",1,"btn","btn-outline-success","btn-sm","text-uppercase"],["type","button",1,"btn","btn-outline-danger","btn-sm","text-uppercase"],[1,"d-flex"],[1,"mx-auto"],[1,"pagination",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._uU(2,"Contributions"),s.qZA(),s.TgZ(3,"div",2),s.TgZ(4,"nav",3),s.TgZ(5,"ol",4),s.TgZ(6,"li",5),s.TgZ(7,"a",6),s.NdJ("click",function(t){return t.preventDefault()}),s._UZ(8,"i",7),s.qZA(),s.qZA(),s.TgZ(9,"li",8),s._uU(10," Liste des contributions "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"div",9),s.TgZ(12,"div",10),s.TgZ(13,"button",11),s.NdJ("click",function(){return e.onChangeFilterStatus()}),s._uU(14),s.qZA(),s.TgZ(15,"div",12),s.NdJ("click",function(){return e.onChangeFilterStatus()}),s.TgZ(16,"button",13),s._UZ(17,"i"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(18,h,50,12,"div",14),s.TgZ(19,"div",15),s.TgZ(20,"div",16),s.TgZ(21,"div",17),s.YNc(22,f,3,0,"div",18),s.qZA(),s.YNc(23,v,20,1,"div",19),s.qZA(),s.qZA(),s.YNc(24,U,5,6,"div",20)),2&t&&(s.xp6(14),s.hij(" ",e.enableShowFilter?"Fermer le filtre":"Filtrer la liste"," "),s.xp6(3),s.Tol(e.enableShowFilter?"lni lni-close text-danger":"bx bx-slider"),s.xp6(1),s.Q6J("ngIf",e.enableShowFilter),s.xp6(4),s.Q6J("ngIf",0===e.traductions.length),s.xp6(1),s.Q6J("ngIf",0!==e.traductions.length),s.xp6(1),s.Q6J("ngIf",0!==e.traductions.length))},directives:[o.O5,b._Y,b.JL,b.sg,b.EJ,b.JJ,b.u,b.YN,b.Kr,o.sg,b.Fj,d.N9,d.ju,d.GZ],pipes:[o.Ov],styles:["ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{color:#1d459a!important;text-decoration:none!important;border:1px solid #fff!important;font-weight:500!important;font-size:18px!important;padding:6px 12px!important}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#1d459a!important;text-decoration:none!important;border:1px solid #fff!important;border-radius:5px!important;font-weight:500!important;font-size:18px!important;padding:6px 12px!important}"]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.Bz.forChild(_)],i.Bz]}),t})();n(5959);let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez]]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,y,b.UX,d.jF,J]]}),t})()}}]);