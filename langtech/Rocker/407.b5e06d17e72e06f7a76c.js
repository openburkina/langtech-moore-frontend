(self.webpackChunkrocker=self.webpackChunkrocker||[]).push([[407],{2498:(e,s,r)=>{"use strict";r.d(s,{g:()=>c});var t=r(5366),i=r(2235),o=r(1116);function n(e,s){if(1&e){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",4),t.TgZ(2,"div",5),t._UZ(3,"i",6),t.qZA(),t.TgZ(4,"div",7),t.TgZ(5,"h6",8),t._uU(6,"Information"),t.qZA(),t.TgZ(7,"div",9),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().close()}),t.qZA(),t.qZA()}if(2&e){const e=t.oxw();t.xp6(8),t.Oqu(e.message)}}function a(e,s){if(1&e){const e=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"div",4),t.TgZ(2,"div",5),t._UZ(3,"i",12),t.qZA(),t.TgZ(4,"div",7),t.TgZ(5,"h6",8),t._uU(6,"Information"),t.qZA(),t.TgZ(7,"div",9),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().close()}),t.qZA(),t.qZA()}if(2&e){const e=t.oxw();t.xp6(8),t.Oqu(e.message)}}function d(e,s){if(1&e){const e=t.EpF();t.TgZ(0,"div",13),t.TgZ(1,"div",4),t.TgZ(2,"div",14),t._UZ(3,"i",15),t.qZA(),t.TgZ(4,"div",7),t.TgZ(5,"h6",16),t._uU(6,"Information"),t.qZA(),t.TgZ(7,"div",17),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().close()}),t.qZA(),t.qZA()}if(2&e){const e=t.oxw();t.xp6(8),t.Oqu(e.message)}}let l=(()=>{class e{constructor(e){this.activeModal=e,this.timer=3}ngOnInit(){this.callTime()}callTime(){setTimeout(()=>{this.timer-=1,this.timer>0?this.callTime():this.close()},1e3)}close(){this.activeModal.close()}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(i.Kz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification"]],inputs:{type:"type",message:"message"},decls:3,vars:3,consts:[["class","alert alert-success border-0 bg-success alert-dismissible fade show py-2",4,"ngIf"],["class","alert alert-danger border-0 bg-danger alert-dismissible fade show py-2",4,"ngIf"],["class","alert alert-warning border-0 bg-warning alert-dismissible fade show py-2",4,"ngIf"],[1,"alert","alert-success","border-0","bg-success","alert-dismissible","fade","show","py-2"],[1,"d-flex","align-items-center"],[1,"font-35","text-white"],[1,"bx","bxs-check-circle"],[1,"ms-3"],[1,"mb-0","text-white"],[1,"text-white"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],[1,"alert","alert-danger","border-0","bg-danger","alert-dismissible","fade","show","py-2"],[1,"bx","bxs-message-square-x"],[1,"alert","alert-warning","border-0","bg-warning","alert-dismissible","fade","show","py-2"],[1,"font-35","text-dark"],[1,"bx","bx-info-circle"],[1,"mb-0","text-dark"],[1,"text-dark"]],template:function(e,s){1&e&&(t.YNc(0,n,10,1,"div",0),t.YNc(1,a,10,1,"div",1),t.YNc(2,d,10,1,"div",2)),2&e&&(t.Q6J("ngIf","success"===s.type),t.xp6(1),t.Q6J("ngIf","danger"===s.type),t.xp6(1),t.Q6J("ngIf","warning"===s.type))},directives:[o.O5],styles:[""]}),e})(),c=(()=>{class e{constructor(e){this.modal=e}open(e,s){void 0!==this.myModal&&this.myModal.dismiss(),this.myModal=this.modal.open(l,{size:"lg",centered:!1,container:"body",animation:!0,keyboard:!0,backdropClass:"bg-light-transparent"}),this.myModal.componentInstance.type=e,this.myModal.componentInstance.message=s}close(){this.myModal.dismiss()}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(i.FF))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7407:(e,s,r)=>{"use strict";r.r(s),r.d(s,{UserProfileModule:()=>g});var t=r(1116),i=r(5424),o=r(1462);class n{constructor(e,s){this.currentPassword=e,this.newPassword=s}}var a=r(5366),d=r(2498),l=r(969),c=r(467);const u=[{path:"",component:(()=>{class e{constructor(e,s,r,t){this.fb=e,this.notification=s,this.userService=r,this.accountService=t}ngOnInit(){this.password=new n,this.user=this.accountService.getCurrentUserInfos(),this.initFormGroup()}initFormGroup(){var e,s,r,t;this.formPassword=this.fb.group({currentPassword:[null,[o.kI.required,o.kI.minLength(4),o.kI.maxLength(30)]],newPassword:[null,[o.kI.required,o.kI.minLength(4),o.kI.maxLength(30)]],confirmPassword:[null,[o.kI.required,o.kI.minLength(4),o.kI.maxLength(30)]]}),this.formUser=this.fb.group({nom:[null===(e=this.user)||void 0===e?void 0:e.nom,o.kI.required],prenom:[null===(s=this.user)||void 0===s?void 0:s.prenom,o.kI.required],email:[null===(r=this.user)||void 0===r?void 0:r.email,o.kI.required],telephone:[null===(t=this.user)||void 0===t?void 0:t.telephone,o.kI.required]})}onGetPassword(){const e=this.formPassword.get("newPassword").value;e!==this.formPassword.get("confirmPassword").value?this.notification.open("warning","La confirmation du mot de passe est incorrecte."):(this.password.currentPassword=this.formPassword.get("currentPassword").value,this.password.newPassword=e,this.onSavePassword())}onSavePassword(){const e=this.userService.changePassword(this.password).subscribe(()=>{e.unsubscribe(),this.notification.open("success","F\xe9licitations! Votre mot de passe a \xe9t\xe9 modifi\xe9 avec succ\xe8s."),this.formPassword.reset(),this.password=new n},s=>{e.unsubscribe(),this.notification.open("danger",s.error.detail?s.error.detail:"Une erreur est survenue lors de la modification du mot de passe !")})}onGetUserInfos(){this.user.nom=this.formUser.value.nom,this.user.prenom=this.formUser.value.prenom,this.user.email=this.formUser.value.email,this.user.telephone=this.formUser.value.telephone,this.onUpdateProfil()}onUpdateProfil(){this.userService.onUpdateProfil(this.user).subscribe({next:e=>{console.log(e.body),e.body&&e.body.id?(this.notification.open("success","Votre profil a \xe9t\xe9 modifi\xe9 avec succ\xe8s !"),this.accountService.saveCurrentUserInfos(this.user)):this.notification.open("danger","Une erreur est survenue lors de la modification du mot de passe !")},error:e=>{this.notification.open("danger",e.error.detail?e.error.detail:"Une erreur est survenue lors de la modification du mot de passe !")}})}}return e.\u0275fac=function(s){return new(s||e)(a.Y36(o.qu),a.Y36(d.g),a.Y36(l.K),a.Y36(c.B))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-user-profile"]],decls:102,vars:7,consts:[[1,"page-breadcrumb","d-none","d-sm-flex","align-items-center","mb-3"],[1,"breadcrumb-title","pe-3"],[1,"ps-3"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0","p-0"],[1,"breadcrumb-item"],["href","#",3,"click"],[1,"bx","bx-home-alt"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container"],[1,"main-body"],[1,"row"],[1,"col-lg-4"],[1,"card"],[1,"card-body"],[1,"d-flex","flex-column","align-items-center","text-center"],["src","assets/images/avatars/avatar.png","alt","Admin","width","110",1,"rounded-circle","p-1","bg-primary"],[1,"mt-3"],[1,"text-secondary","mb-1"],[1,"text-muted","font-size-sm"],[1,"col-lg-8"],["role","tablist",1,"nav","nav-pills","nav-justified","mb-3"],["role","parametres",1,"nav-item"],["data-bs-toggle","pill","href","#parametres","role","tab","aria-selected","false",1,"nav-link","active"],[1,"d-flex","align-items-center"],[1,"tab-icon"],[1,"bx","bx-user-pin","font-18","me-1"],[1,"tab-title"],["role","password",1,"nav-item"],["data-bs-toggle","pill","href","#password","role","tab","aria-selected","false",1,"nav-link"],[1,"bx","bx-lock","font-18","me-1"],["id","pills-tabContent",1,"tab-content"],["id","parametres","role","parametres",1,"tab-pane","fade","show","active"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9","text-secondary"],["type","text","formControlName","nom","name","nom",1,"form-control"],["type","text","formControlName","prenom","name","prenom",1,"form-control"],["type","email","formControlName","email","name","email",1,"form-control"],["type","phone","formControlName","telephone","name","telephone",1,"form-control"],["type","submit",1,"btn","btn-primary","px-4",3,"disabled"],["id","password","role","password",1,"tab-pane","fade"],[1,"col-sm-4"],[1,"col-sm-8","text-secondary"],["type","password","name","currentPassword","formControlName","currentPassword",1,"form-control"],["type","password","name","newPassword","formControlName","newPassword",1,"form-control"],["type","password","name","confirmPassword","formControlName","confirmPassword",1,"form-control"]],template:function(e,s){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._uU(2,"Mon Profil"),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"nav",3),a.TgZ(5,"ol",4),a.TgZ(6,"li",5),a.TgZ(7,"a",6),a.NdJ("click",function(e){return e.preventDefault()}),a._UZ(8,"i",7),a.qZA(),a.qZA(),a.TgZ(9,"li",8),a._uU(10,"Mes informations personnelles"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",9),a.TgZ(12,"div",10),a.TgZ(13,"div",11),a.TgZ(14,"div",12),a.TgZ(15,"div",13),a.TgZ(16,"div",14),a.TgZ(17,"div",15),a._UZ(18,"img",16),a.TgZ(19,"div",17),a.TgZ(20,"h4"),a._uU(21),a.qZA(),a.TgZ(22,"p",18),a._uU(23),a.qZA(),a.TgZ(24,"p",19),a._uU(25),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"div",20),a.TgZ(27,"div",13),a.TgZ(28,"div",14),a.TgZ(29,"ul",21),a.TgZ(30,"li",22),a.TgZ(31,"a",23),a.TgZ(32,"div",24),a.TgZ(33,"div",25),a._UZ(34,"i",26),a.qZA(),a.TgZ(35,"div",27),a._uU(36,"Param\xe8tres du compte"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(37,"li",28),a.TgZ(38,"a",29),a.TgZ(39,"div",24),a.TgZ(40,"div",25),a._UZ(41,"i",30),a.qZA(),a.TgZ(42,"div",27),a._uU(43,"Mot de passe"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(44,"hr"),a.TgZ(45,"div",31),a.TgZ(46,"div",32),a.TgZ(47,"form",33),a.NdJ("ngSubmit",function(){return s.onGetUserInfos()}),a.TgZ(48,"div",34),a.TgZ(49,"div",35),a.TgZ(50,"h6",36),a._uU(51,"Nom"),a.qZA(),a.qZA(),a.TgZ(52,"div",37),a._UZ(53,"input",38),a.qZA(),a.qZA(),a.TgZ(54,"div",34),a.TgZ(55,"div",35),a.TgZ(56,"h6",36),a._uU(57,"Pr\xe9nom(s)"),a.qZA(),a.qZA(),a.TgZ(58,"div",37),a._UZ(59,"input",39),a.qZA(),a.qZA(),a.TgZ(60,"div",34),a.TgZ(61,"div",35),a.TgZ(62,"h6",36),a._uU(63,"Email"),a.qZA(),a.qZA(),a.TgZ(64,"div",37),a._UZ(65,"input",40),a.qZA(),a.qZA(),a.TgZ(66,"div",34),a.TgZ(67,"div",35),a.TgZ(68,"h6",36),a._uU(69,"T\xe9l\xe9phone"),a.qZA(),a.qZA(),a.TgZ(70,"div",37),a._UZ(71,"input",41),a.qZA(),a.qZA(),a.TgZ(72,"div",11),a._UZ(73,"div",35),a.TgZ(74,"div",37),a.TgZ(75,"button",42),a._uU(76," Sauvegarder les modifications "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(77,"div",43),a.TgZ(78,"form",33),a.NdJ("ngSubmit",function(){return s.onGetPassword()}),a.TgZ(79,"div",34),a.TgZ(80,"div",44),a.TgZ(81,"h6",36),a._uU(82,"Mot de passe actuel"),a.qZA(),a.qZA(),a.TgZ(83,"div",45),a._UZ(84,"input",46),a.qZA(),a.qZA(),a.TgZ(85,"div",34),a.TgZ(86,"div",44),a.TgZ(87,"h6",36),a._uU(88,"Nouveau mot de passe"),a.qZA(),a.qZA(),a.TgZ(89,"div",45),a._UZ(90,"input",47),a.qZA(),a.qZA(),a.TgZ(91,"div",34),a.TgZ(92,"div",44),a.TgZ(93,"h6",36),a._uU(94,"Confirmation du nouveau mot de passe"),a.qZA(),a.qZA(),a.TgZ(95,"div",45),a._UZ(96,"input",48),a.qZA(),a.qZA(),a.TgZ(97,"div",11),a._UZ(98,"div",44),a.TgZ(99,"div",45),a.TgZ(100,"button",42),a._uU(101," Sauvegarder les modifications "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(21),a.Oqu((null==s.user?null:s.user.nom)+" "+(null==s.user?null:s.user.prenom)),a.xp6(2),a.Oqu(null==s.user?null:s.user.email),a.xp6(2),a.Oqu(null==s.user?null:s.user.typeUtilisateur),a.xp6(22),a.Q6J("formGroup",s.formUser),a.xp6(28),a.Q6J("disabled",s.formUser.invalid),a.xp6(3),a.Q6J("formGroup",s.formPassword),a.xp6(22),a.Q6J("disabled",s.formPassword.invalid))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u],styles:[""]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.Bz.forChild(u)],i.Bz]}),e})();var m=r(3156);let g=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[t.ez,Z,m.I]]}),e})()}}]);