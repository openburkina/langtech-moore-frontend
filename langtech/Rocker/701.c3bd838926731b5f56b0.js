(self.webpackChunkrocker=self.webpackChunkrocker||[]).push([[701],{4107:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});var r=i(5366),s=i(2235);let n=(()=>{class e{constructor(e){this.activeModal=e}ngOnInit(){}onDismiss(e){this.activeModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.Kz))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-confirm"]],inputs:{message:"message"},decls:13,vars:1,consts:[[1,"card"],[1,"card-header","bg-primary","border-bottom-red","text-center","text-white"],[1,"card-body"],[1,"text-center","text-main-color-green","mb-3"],[1,"form-group","text-center"],["type","button",1,"btn","btn-outline-danger","mx-3",3,"click"],[1,"bx","bx-x-circle","mr-1"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"bx","bx-check-square"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._uU(2," Confirmation "),r.qZA(),r.TgZ(3,"div",2),r.TgZ(4,"div",3),r._uU(5),r.qZA(),r.TgZ(6,"div",4),r.TgZ(7,"button",5),r.NdJ("click",function(){return t.onDismiss(!1)}),r._UZ(8,"i",6),r._uU(9," Annuler "),r.qZA(),r.TgZ(10,"button",7),r.NdJ("click",function(){return t.onDismiss(!0)}),r._UZ(11,"i",8),r._uU(12," Confirmer "),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(5),r.hij(" ",t.message," "))},styles:[""]}),e})()},2498:(e,t,i)=>{"use strict";i.d(t,{g:()=>c});var r=i(5366),s=i(2235),n=i(1116);function o(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r._UZ(3,"i",6),r.qZA(),r.TgZ(4,"div",7),r.TgZ(5,"h6",8),r._uU(6,"Information"),r.qZA(),r.TgZ(7,"div",9),r._uU(8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"button",10),r.NdJ("click",function(){return r.CHM(e),r.oxw().close()}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(8),r.Oqu(e.message)}}function l(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",11),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r._UZ(3,"i",12),r.qZA(),r.TgZ(4,"div",7),r.TgZ(5,"h6",8),r._uU(6,"Information"),r.qZA(),r.TgZ(7,"div",9),r._uU(8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"button",10),r.NdJ("click",function(){return r.CHM(e),r.oxw().close()}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(8),r.Oqu(e.message)}}function a(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",13),r.TgZ(1,"div",4),r.TgZ(2,"div",14),r._UZ(3,"i",15),r.qZA(),r.TgZ(4,"div",7),r.TgZ(5,"h6",16),r._uU(6,"Information"),r.qZA(),r.TgZ(7,"div",17),r._uU(8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"button",10),r.NdJ("click",function(){return r.CHM(e),r.oxw().close()}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.xp6(8),r.Oqu(e.message)}}let u=(()=>{class e{constructor(e){this.activeModal=e,this.timer=3}ngOnInit(){this.callTime()}callTime(){setTimeout(()=>{this.timer-=1,this.timer>0?this.callTime():this.close()},1e3)}close(){this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.Kz))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-notification"]],inputs:{type:"type",message:"message"},decls:3,vars:3,consts:[["class","alert alert-success border-0 bg-success alert-dismissible fade show py-2",4,"ngIf"],["class","alert alert-danger border-0 bg-danger alert-dismissible fade show py-2",4,"ngIf"],["class","alert alert-warning border-0 bg-warning alert-dismissible fade show py-2",4,"ngIf"],[1,"alert","alert-success","border-0","bg-success","alert-dismissible","fade","show","py-2"],[1,"d-flex","align-items-center"],[1,"font-35","text-white"],[1,"bx","bxs-check-circle"],[1,"ms-3"],[1,"mb-0","text-white"],[1,"text-white"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],[1,"alert","alert-danger","border-0","bg-danger","alert-dismissible","fade","show","py-2"],[1,"bx","bxs-message-square-x"],[1,"alert","alert-warning","border-0","bg-warning","alert-dismissible","fade","show","py-2"],[1,"font-35","text-dark"],[1,"bx","bx-info-circle"],[1,"mb-0","text-dark"],[1,"text-dark"]],template:function(e,t){1&e&&(r.YNc(0,o,10,1,"div",0),r.YNc(1,l,10,1,"div",1),r.YNc(2,a,10,1,"div",2)),2&e&&(r.Q6J("ngIf","success"===t.type),r.xp6(1),r.Q6J("ngIf","danger"===t.type),r.xp6(1),r.Q6J("ngIf","warning"===t.type))},directives:[n.O5],styles:[""]}),e})(),c=(()=>{class e{constructor(e){this.modal=e}open(e,t){void 0!==this.myModal&&this.myModal.dismiss(),this.myModal=this.modal.open(u,{size:"lg",centered:!1,container:"body",animation:!0,keyboard:!0,backdropClass:"bg-light-transparent"}),this.myModal.componentInstance.type=e,this.myModal.componentInstance.message=t}close(){this.myModal.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(s.FF))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},329:(e,t,i)=>{"use strict";i.d(t,{O:()=>r});class r{constructor(e,t,i,r,s){this.id=e,this.libelle=t,this.description=i,this.profilsChange=r,this.authorities=s,this.authorities=[],this.profilsChange=!1}}},2710:(e,t,i)=>{"use strict";i.d(t,{V:()=>n});var r=i(329);class s{constructor(e,t,i,r,s,n,o,l,a,u,c,d,g){this.id=e,this.login=t,this.password=i,this.firstName=r,this.lastName=s,this.telephone=n,this.email=o,this.resetKey=l,this.resetDate=a,this.createdBy=u,this.activated=c,this.defaultPassord=d,this.authorities=g,this.activated=!1,this.authorities=[],this.defaultPassord=!1}}class n{constructor(e,t,i,n,o,l,a,u,c,d,g,p){this.id=e,this.nom=t,this.prenom=i,this.telephone=n,this.email=o,this.login=l,this.password=a,this.typeUtilisateur=u,this.pointFidelite=c,this.profil=d,this.statut=g,this.user=p,this.profil=new r.O,this.user=new s}}},6701:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UsersModule:()=>J});var r=i(1116),s=i(5424),n=i(6304),o=i(2710),l=i(1462),a=i(5366),u=i(969),c=i(5283),d=i(2498),g=i(2235);function p(e,t){1&e&&(a.TgZ(0,"span",7),a._uU(1," Le mot de passe doit avoir au moins 6 caract\xe8res ! "),a.qZA())}function m(e,t){if(1&e&&(a.TgZ(0,"div",5),a.TgZ(1,"label",25),a._uU(2,"Mot de passe "),a.TgZ(3,"span",7),a._uU(4,"*"),a.qZA(),a.qZA(),a._UZ(5,"input",26),a.YNc(6,p,2,0,"span",27),a.qZA()),2&e){const e=a.oxw();a.xp6(6),a.Q6J("ngIf",e.formUser.get("password").invalid)}}function Z(e,t){if(1&e&&(a.TgZ(0,"option",28),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("ngValue",e.id),a.xp6(1),a.Oqu(e.libelle)}}let h=(()=>{class e{constructor(e,t,i,r,s){this.fb=e,this.userSerice=t,this.profilService=i,this.notification=r,this.activeModal=s}ngOnInit(){this.profils$=this.profilService.profils$,this.createUserForm()}createUserForm(){var e,t;this.formUser=this.fb.group({nom:[null,l.kI.required],prenom:[null,l.kI.required],email:[null,[l.kI.required,l.kI.email]],password:[null,[l.kI.required,l.kI.minLength(6)]],telephone:[null],profilId:[null,l.kI.required]}),null!==this.utilisateur?(this.formUser.patchValue({nom:this.utilisateur.nom,prenom:this.utilisateur.prenom,email:this.utilisateur.email,telephone:this.utilisateur.telephone,profilId:null===(t=null===(e=this.utilisateur)||void 0===e?void 0:e.profil)||void 0===t?void 0:t.id}),this.formUser.get("password").clearValidators(),console.log(this.formUser)):this.utilisateur=new o.V}getUserInfos(){this.utilisateur.nom=this.formUser.get("nom").value,this.utilisateur.prenom=this.formUser.get("prenom").value,this.utilisateur.telephone=this.formUser.get("telephone").value,this.utilisateur.email=this.formUser.get("email").value,this.utilisateur.email=this.utilisateur.email.toLowerCase(),this.utilisateur.login=this.utilisateur.email.toLowerCase(),this.utilisateur.profil.id=this.formUser.value.profilId,this.utilisateur.typeUtilisateur="UTILISATEUR",console.log(this.utilisateur),this.saveUser()}saveUser(){this.utilisateur.id?this.updateUser():this.createUser()}createUser(){this.utilisateur.password=this.formUser.value.password;const e=this.userSerice.createUser(this.utilisateur).subscribe(t=>{null!==t.body&&t.body.id?(this.notification.open("success",`L'utilisateur #${this.utilisateur.email} a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s !`),this.formUser.reset(),this.utilisateur=new o.V,this.onCloseModal(!0)):this.notification.open("warning","Une erreur est survenue lors de la cr\xe9ation de l'utilisateur !"),e.unsubscribe()},t=>{e.unsubscribe(),this.notification.open("danger",t.error.detail?t.error.detail:"Une erreur est survenue lors de la cr\xe9ation de l'utilisateur !")})}updateUser(){const e=this.userSerice.updateUser(this.utilisateur).subscribe(t=>{null!==t.body&&t.body.id?(this.notification.open("success",`L'utilisateur #${this.utilisateur.email} a \xe9t\xe9 mis \xe0 jour avec succ\xe8s !`),this.formUser.reset(),this.utilisateur=new o.V,this.onCloseModal(!0)):this.notification.open("warning","Une erreur est survenue lors de la mise \xe0 jour de l'utilisateur !"),e.unsubscribe()},t=>{e.unsubscribe(),this.notification.open("danger",t.error.detail?t.error.detail:"Une erreur est survenue lors de la mise \xe0 jour de l'utilisateur !")})}onCloseModal(e){this.activeModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.qu),a.Y36(u.K),a.Y36(c.z),a.Y36(d.g),a.Y36(g.Kz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-create-update-user"]],inputs:{utilisateur:"utilisateur"},decls:46,vars:7,consts:[[1,"card"],[1,"card-header","bg-primary","border-bottom-red","text-center","text-white"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-md-6","mb-3"],["for","nom",1,"col-form-label"],[1,"text-danger"],["type","text","name","nom","formControlName","nom","id","nom",1,"form-control"],["for","prenom",1,"col-form-label"],["type","text","name","prenom","formControlName","prenom","id","prenom",1,"form-control"],["for","telephone",1,"col-form-label"],["type","tel","name","telephone","formControlName","telephone","id","telephone",1,"form-control"],["for","email",1,"col-form-label"],["type","email","name","email","formControlName","email","id","email",1,"form-control"],["class","col-12 col-md-6 mb-3",4,"ngIf"],["for","profilId",1,"col-form-label"],["name","profilId","formControlName","profilId","id","profilId",1,"form-control"],["selected","","disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","text-right"],["type","reset",1,"btn","btn-outline-danger","radius-30","mx-3",3,"click"],[1,"bx","bx-x-circle","mr-1"],["type","submit",1,"btn","btn-outline-success","radius-30",3,"disabled"],[1,"bx","bx-check-square"],["for","password",1,"col-form-label"],["type","text","name","password","formControlName","password","id","password",1,"form-control"],["class","text-danger",4,"ngIf"],[3,"ngValue"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._uU(2," Cr\xe9er / Modifier un utilisateur "),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"form",3),a.NdJ("ngSubmit",function(){return t.getUserInfos()}),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"label",6),a._uU(8,"Nom "),a.TgZ(9,"span",7),a._uU(10,"*"),a.qZA(),a.qZA(),a._UZ(11,"input",8),a.qZA(),a.TgZ(12,"div",5),a.TgZ(13,"label",9),a._uU(14,"Pr\xe9nom(s) "),a.TgZ(15,"span",7),a._uU(16,"*"),a.qZA(),a.qZA(),a._UZ(17,"input",10),a.qZA(),a.TgZ(18,"div",5),a.TgZ(19,"label",11),a._uU(20,"T\xe9l\xe9phone"),a.qZA(),a._UZ(21,"input",12),a.qZA(),a.TgZ(22,"div",5),a.TgZ(23,"label",13),a._uU(24,"Email "),a.TgZ(25,"span",7),a._uU(26,"*"),a.qZA(),a.qZA(),a._UZ(27,"input",14),a.qZA(),a.YNc(28,m,7,1,"div",15),a.TgZ(29,"div",5),a.TgZ(30,"label",16),a._uU(31,"Profil "),a.TgZ(32,"span",7),a._uU(33,"*"),a.qZA(),a.qZA(),a.TgZ(34,"select",17),a.TgZ(35,"option",18),a._uU(36,"--S\xe9lectionner le profil--"),a.qZA(),a.YNc(37,Z,2,2,"option",19),a.ALo(38,"async"),a.qZA(),a.qZA(),a.TgZ(39,"div",20),a.TgZ(40,"button",21),a.NdJ("click",function(){return t.onCloseModal(!1)}),a._UZ(41,"i",22),a._uU(42," Annuler "),a.qZA(),a.TgZ(43,"button",23),a._UZ(44,"i",24),a._uU(45," Enregistrer "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Q6J("formGroup",t.formUser),a.xp6(24),a.Q6J("ngIf",!t.utilisateur.id),a.xp6(7),a.Q6J("ngValue",null),a.xp6(2),a.Q6J("ngForOf",a.lcZ(38,5,t.profils$)),a.xp6(6),a.Q6J("disabled",t.formUser.invalid))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,r.O5,l.EJ,l.YN,l.Kr,r.sg],pipes:[r.Ov],styles:[""]}),e})();var f=i(4107);let b=(()=>{class e{constructor(e,t,i){this.userService=e,this.notification=t,this.activateModal=i}ngOnInit(){}getOneUser(){const e=this.userService.getOneUser(this.user.id).subscribe(t=>{console.log(t.body),null===t.body?this.notification.open("warning","Aucune information trouv\xe9 pour cet utilisateur !"):this.user=t.body,e.unsubscribe()},t=>{e.unsubscribe(),this.notification.open("danger",t.error.detail?t.error.detail:"Une erreur est survenue lors de la recup\xe9ration des informations de l'utilisateur !")})}onCloseModal(){this.activateModal.close()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.K),a.Y36(d.g),a.Y36(g.Kz))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-detail-user"]],decls:34,vars:5,consts:[[1,"card"],[1,"card-header","bg-primary","border-bottom-red","text-center","text-white"],[1,"card-body"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","flex-wrap"],[1,"mb-0"],[1,"text-secondary"],[1,"form-group","text-right","mt-2"],["type","reset",1,"btn","btn-outline-danger","radius-30","mx-3",3,"click"],[1,"bx","bx-x-circle","mr-1"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._uU(2," D\xe9tail des informations d'un utilisateur "),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"ul",3),a.TgZ(5,"li",4),a.TgZ(6,"h6",5),a._uU(7," Nom "),a.qZA(),a.TgZ(8,"span",6),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"li",4),a.TgZ(11,"h6",5),a._uU(12," Pr\xe9nom(s) "),a.qZA(),a.TgZ(13,"span",6),a._uU(14),a.qZA(),a.qZA(),a.TgZ(15,"li",4),a.TgZ(16,"h6",5),a._uU(17," Email "),a.qZA(),a.TgZ(18,"span",6),a._uU(19),a.qZA(),a.qZA(),a.TgZ(20,"li",4),a.TgZ(21,"h6",5),a._uU(22," T\xe9l\xe9phone "),a.qZA(),a.TgZ(23,"span",6),a._uU(24),a.qZA(),a.qZA(),a.TgZ(25,"li",4),a.TgZ(26,"h6",5),a._uU(27," Profil "),a.qZA(),a.TgZ(28,"span",6),a._uU(29),a.qZA(),a.qZA(),a.qZA(),a.TgZ(30,"div",7),a.TgZ(31,"button",8),a.NdJ("click",function(){return t.onCloseModal()}),a._UZ(32,"i",9),a._uU(33," Fermer "),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(9),a.Oqu(null==t.user?null:t.user.nom),a.xp6(5),a.Oqu(null==t.user?null:t.user.prenom),a.xp6(5),a.Oqu(null==t.user?null:t.user.email),a.xp6(5),a.Oqu(null==t.user?null:t.user.telephone),a.xp6(5),a.Oqu(null==t.user||null==t.user.profil?null:t.user.profil.libelle))},styles:[""]}),e})();function q(e,t){1&e&&a._UZ(0,"hr")}function v(e,t){if(1&e&&(a.TgZ(0,"option",46),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("ngValue",e.id),a.xp6(1),a.Oqu(e.libelle)}}function A(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",13),a.TgZ(1,"form",29),a.NdJ("ngSubmit",function(){return a.CHM(e),a.oxw().onSearchUser()}),a.TgZ(2,"div",9),a.TgZ(3,"div",30),a.TgZ(4,"label",31),a._uU(5,"Nom"),a.qZA(),a._UZ(6,"input",32),a.qZA(),a.TgZ(7,"div",30),a.TgZ(8,"label",33),a._uU(9,"Pr\xe9nom(s)"),a.qZA(),a._UZ(10,"input",34),a.qZA(),a.TgZ(11,"div",30),a.TgZ(12,"label",35),a._uU(13,"Email"),a.qZA(),a._UZ(14,"input",36),a.qZA(),a.TgZ(15,"div",30),a.TgZ(16,"label",37),a._uU(17,"Profil"),a.qZA(),a.TgZ(18,"select",38),a.TgZ(19,"option",39),a._uU(20,"--S\xe9lectionner le profil--"),a.qZA(),a.YNc(21,v,2,2,"option",40),a.ALo(22,"async"),a.qZA(),a.qZA(),a.TgZ(23,"div",41),a.TgZ(24,"button",42),a.NdJ("click",function(){return a.CHM(e),a.oxw().onResetForm()}),a._UZ(25,"i",43),a._uU(26," R\xe9nitialiser "),a.qZA(),a.TgZ(27,"button",44),a._UZ(28,"i",45),a._uU(29," Rechercher "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("formGroup",e.formSearch),a.xp6(18),a.Q6J("ngValue",null),a.xp6(2),a.Q6J("ngForOf",a.lcZ(22,3,e.profils$))}}function T(e,t){1&e&&(a.TgZ(0,"div",10),a.TgZ(1,"div",11),a.TgZ(2,"div",12),a.TgZ(3,"h6"),a._uU(4," Aucun utilisateur enregistr\xe9. Vous pouvez ajouter de nouveaux profils en cliquant sur le bouton Ajouter ci-dessus ! "),a.qZA(),a.qZA(),a.qZA(),a.qZA())}function U(e,t){1&e&&(a.TgZ(0,"div",47),a.TgZ(1,"div",48),a.TgZ(2,"h6"),a._uU(3," Aucun utilisateur enregistr\xe9. Veuillez cliquer sur le bouton suivant "),a._UZ(4,"i",49),a.qZA(),a.qZA(),a.qZA())}function x(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a._uU(2),a.qZA(),a.TgZ(3,"td"),a._uU(4),a.qZA(),a.TgZ(5,"td"),a._uU(6),a.qZA(),a.TgZ(7,"td"),a._uU(8),a.qZA(),a.TgZ(9,"td"),a._uU(10),a.qZA(),a.TgZ(11,"td"),a._uU(12),a.qZA(),a.TgZ(13,"td"),a.TgZ(14,"div",54),a.TgZ(15,"button",55),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).onShowUserDetail(t)}),a._UZ(16,"i",56),a.qZA(),a.TgZ(17,"button",57),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).onResetPassword(t)}),a._UZ(18,"i",58),a.qZA(),a.TgZ(19,"button",59),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).openCreateUpdateModal(t)}),a._UZ(20,"i",60),a.qZA(),a.TgZ(21,"button",61),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).openConfirmModal(t)}),a._UZ(22,"i",62),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=t.index;a.xp6(2),a.Oqu(i+1),a.xp6(2),a.Oqu(e.email),a.xp6(2),a.Oqu(e.nom),a.xp6(2),a.Oqu(e.prenom),a.xp6(2),a.Oqu(e.telephone),a.xp6(2),a.Oqu(e.email)}}function w(e,t){if(1&e&&(a.TgZ(0,"div",50),a.TgZ(1,"table",51),a.TgZ(2,"thead",52),a.TgZ(3,"tr"),a.TgZ(4,"th"),a._uU(5,"#"),a.qZA(),a.TgZ(6,"th"),a._uU(7,"Login"),a.qZA(),a.TgZ(8,"th"),a._uU(9,"Nom"),a.qZA(),a.TgZ(10,"th"),a._uU(11,"Pr\xe9nom(s)"),a.qZA(),a.TgZ(12,"th"),a._uU(13,"T\xe9l\xe9phone"),a.qZA(),a.TgZ(14,"th"),a._uU(15,"Email"),a.qZA(),a.TgZ(16,"th"),a._uU(17,"Actions"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"tbody"),a.YNc(19,x,23,6,"tr",53),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(19),a.Q6J("ngForOf",e.users)}}function _(e,t){1&e&&a._uU(0,"Pr\xe9c.")}function y(e,t){1&e&&a._uU(0,"Suiv.")}function I(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"div",64),a.TgZ(2,"ngb-pagination",65),a.NdJ("pageChange",function(t){return a.CHM(e),a.oxw().ngbPaginationPage=t})("pageChange",function(t){return a.CHM(e),a.oxw().loadPage(t)}),a.YNc(3,_,1,0,"ng-template",66),a.YNc(4,y,1,0,"ng-template",67),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(2),a.Q6J("collectionSize",e.totalItems)("page",e.ngbPaginationPage)("pageSize",e.itemsPerPage)("maxSize",e.maxSize)("rotate",!0)("boundaryLinks",!1)}}const k=[{path:"",component:(()=>{class e{constructor(e,t,i,r,s){this.fb=e,this.userService=t,this.profilService=i,this.notification=r,this.modal=s,this.users=[],this.totalItems=0,this.itemsPerPage=10,this.maxSize=10,this.page=0,this.ngbPaginationPage=1,this.formSearch=this.fb.group({nom:null,prenom:null,email:null,profilId:null})}ngOnInit(){this.enableShowFilter=!1,this.profils$=this.profilService.profils$,this.searchUser=new o.V,this.user=new o.V,this.getUsers()}getUsers(){const e={page:this.page,size:this.itemsPerPage};this.users=[],this.searchUser.typeUtilisateur="UTILISATEUR";const t=this.userService.getUsersByCriteria(this.searchUser,e).subscribe(e=>{console.log(e.body),null===e.body||0===e.body.length?this.notification.open("warning","Aucun utilisateur trouv\xe9 !"):(this.users=e.body,this.totalItems=Number(e.headers.get("X-Total-Count"))),t.unsubscribe()},e=>{t.unsubscribe(),this.notification.open("danger",e.error.detail?e.error.detail:"Une erreur est survenue lors de la recup\xe9ration des utilisateurs !")})}onSearchUser(){this.searchUser.nom=this.formSearch.value.nom,this.searchUser.prenom=this.formSearch.value.prenom,this.searchUser.email=this.formSearch.value.email,this.searchUser.profil.id=this.formSearch.value.profilId,this.getUsers()}onChangeFilterStatus(){this.users.length>0&&(this.enableShowFilter=!this.enableShowFilter)}onShowUserDetail(e){var t=this;return(0,n.Z)(function*(){(yield t.modal.open(b,{size:"lg",backdrop:"static",centered:!0})).componentInstance.user=e})()}openCreateUpdateModal(e){var t=this;return(0,n.Z)(function*(){const i=yield t.modal.open(h,{size:"lg",backdrop:"static",centered:!0});i.componentInstance.utilisateur=e,i.result.then(e=>{e&&t.onSearchUser()})})()}openConfirmModal(e){var t=this;return(0,n.Z)(function*(){t.user=e;const i=t.modal.open(f.X,{size:"lg",backdrop:"static",centered:!0});i.componentInstance.message=`Voulez-vous supprimer l'utilisateur #${e.email} - ${e.nom+" "+e.prenom}  ?`,yield i.result.then(i=>{!0===i&&t.deleteUser(e)})})()}loadPage(e){this.page=e-1,this.getUsers()}onResetForm(){this.formSearch.reset(),this.onSearchUser()}deleteUser(e){this.userService.deleteUser(e.id).subscribe({next:()=>{this.onSearchUser()},error:e=>{this.notification.open("danger",e.error.detail?e.error.detail:"Une erreur est survenue lors de la suppression de l'utilisateur !")}})}onResetPassword(e){const t=this.userService.requestPasswordReset(e.email).subscribe(()=>{t.unsubscribe(),this.notification.open("success","Le mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s !")},e=>{t.unsubscribe(),this.notification.open("danger",e.error.detail?e.error.detail:"Une erreur est survnue lors de la r\xe9initialisation du mot de passe !")})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.qu),a.Y36(u.K),a.Y36(c.z),a.Y36(d.g),a.Y36(g.FF))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-users"]],decls:38,vars:9,consts:[[1,"page-breadcrumb","d-none","d-sm-flex","align-items-center","mb-3"],[1,"breadcrumb-title","pe-3"],[1,"ps-3"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0","p-0"],[1,"breadcrumb-item"],["href","#",3,"click"],[1,"bx","bx-home-alt"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row","align-items-center"],[1,"col-lg-6","col-xl-6"],[1,"btn","btn-primary","mb-3","mb-lg-0","radius-30",3,"click"],[1,"bx","bx-user-plus"],[1,"float-lg-end"],[1,"row","row-cols-lg-auto","g-2"],[1,"btn-group"],["type","button",1,"btn","btn-white","text-primary",3,"click"],[1,"btn-group",3,"click"],["type","button",1,"btn","btn-white","dropdown-toggle","dropdown-toggle-nocaret","px-1"],[4,"ngIf"],["class","row align-items-center",4,"ngIf"],["class","col-12",4,"ngIf"],["class","d-lg-flex align-items-center mb-4 gap-3",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"col-12","col-md-6","mb-3"],["for","nom",1,"col-form-label"],["type","text","name","nom","formControlName","nom","id","nom",1,"form-control"],["for","prenom",1,"col-form-label"],["type","text","name","prenom","formControlName","prenom","id","prenom",1,"form-control"],["for","email",1,"col-form-label"],["type","email","name","email","formControlName","email","id","email",1,"form-control"],["for","profilId",1,"col-form-label"],["name","profilId","formControlName","profilId","id","profilId",1,"form-control"],["selected","","disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","text-center"],["type","reset",1,"btn","btn-outline-danger","radius-30","mx-3",3,"click"],[1,"bx","bx-x-circle","mr-1"],["type","submit",1,"btn","btn-outline-success","radius-30"],[1,"bx","bx-search"],[3,"ngValue"],[1,"d-lg-flex","align-items-center","mb-4","gap-3"],[1,"position-relative"],[1,"lni","lni-arrow-right"],[1,"table-responsive"],[1,"table","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"d-flex","order-actions"],["type","button",1,"btn","btn-outline-primary","radius-30","btn-sm","mx-2",3,"click"],[1,"bx","bx-show"],["type","button",1,"btn","btn-outline-warning","radius-30","btn-sm","mx-2",3,"click"],[1,"bx","bx-reset"],["type","button",1,"btn","btn-outline-success","radius-30","btn-sm",3,"click"],[1,"bx","bxs-edit"],["type","button",1,"btn","btn-outline-danger","radius-30","btn-sm","mx-2",3,"click"],[1,"bx","bxs-trash"],[1,"d-flex"],[1,"mx-auto"],[1,"pagination",3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._uU(2,"Utilisateurs"),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"nav",3),a.TgZ(5,"ol",4),a.TgZ(6,"li",5),a.TgZ(7,"a",6),a.NdJ("click",function(e){return e.preventDefault()}),a._UZ(8,"i",7),a.qZA(),a.qZA(),a.TgZ(9,"li",8),a._uU(10,"Liste des utilisateurs"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",9),a.TgZ(12,"div",10),a.TgZ(13,"div",11),a.TgZ(14,"div",12),a.TgZ(15,"div",13),a.TgZ(16,"div",14),a.TgZ(17,"a",15),a.NdJ("click",function(){return t.openCreateUpdateModal(null)}),a._UZ(18,"i",16),a._uU(19,"Cr\xe9er un nouvel utilisateur "),a.qZA(),a.qZA(),a.TgZ(20,"div",14),a.TgZ(21,"form",17),a.TgZ(22,"div",18),a.TgZ(23,"div",10),a.TgZ(24,"div",19),a.TgZ(25,"button",20),a.NdJ("click",function(){return t.onChangeFilterStatus()}),a._uU(26),a.qZA(),a.TgZ(27,"div",21),a.NdJ("click",function(){return t.onChangeFilterStatus()}),a.TgZ(28,"button",22),a._UZ(29,"i"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(30,q,1,0,"hr",23),a.YNc(31,A,30,5,"div",24),a.qZA(),a.qZA(),a.qZA(),a.YNc(32,T,5,0,"div",25),a.qZA(),a.TgZ(33,"div",11),a.TgZ(34,"div",12),a.YNc(35,U,5,0,"div",26),a.YNc(36,w,20,1,"div",27),a.qZA(),a.qZA(),a.YNc(37,I,5,6,"div",28)),2&e&&(a.xp6(26),a.hij(" ",t.enableShowFilter?"Fermer le filtre":"Filtrer la liste"," "),a.xp6(3),a.Tol(t.enableShowFilter?"lni lni-close text-danger":"bx bx-slider"),a.xp6(1),a.Q6J("ngIf",t.enableShowFilter),a.xp6(1),a.Q6J("ngIf",t.enableShowFilter),a.xp6(1),a.Q6J("ngIf",0===t.users.length),a.xp6(3),a.Q6J("ngIf",0===t.users.length),a.xp6(1),a.Q6J("ngIf",0!==t.users.length),a.xp6(1),a.Q6J("ngIf",0!==t.users.length))},directives:[l._Y,l.JL,l.F,r.O5,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,r.sg,g.N9,g.ju,g.GZ],pipes:[r.Ov],styles:["ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{color:#1d459a!important;text-decoration:none!important;border:1px solid #fff!important;font-weight:500!important;font-size:18px!important;padding:6px 12px!important}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#1d459a!important;text-decoration:none!important;border:1px solid #fff!important;border-radius:5px!important;font-weight:500!important;font-size:18px!important;padding:6px 12px!important}"]}),e})()},{path:"create-update-user/:userId",component:h},{path:"detail-user/:userId",component:b}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.Bz.forChild(k)],s.Bz]}),e})();var S=i(3156),C=i(9937);let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.ez,N,S.I,C.ZQ]]}),e})()},6304:(e,t,i)=>{"use strict";function r(e,t,i,r,s,n,o){try{var l=e[n](o),a=l.value}catch(u){return void i(u)}l.done?t(a):Promise.resolve(a).then(r,s)}function s(e){return function(){var t=this,i=arguments;return new Promise(function(s,n){var o=e.apply(t,i);function l(e){r(o,s,n,l,a,"next",e)}function a(e){r(o,s,n,l,a,"throw",e)}l(void 0)})}}i.d(t,{Z:()=>s})}}]);